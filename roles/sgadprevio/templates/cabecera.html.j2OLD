<!DOCTYPE html>

<html lang="es" class="light">
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Sistema - Agencia para la Transformación Digital y de la Función Pública</title>
    <script src="https://cdn.tailwindcss.com"></script>
    	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   
  	  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Inter:wght@400;500;700&display=swap">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: {
                            DEFAULT: '#333',
                            light: '#666',
                        },
                    },
                },
            },
        }
    </script>
    <style>
        body {font-family: 'Inter', sans-serif;}
 
        .mono {font-family: 'IBM Plex Mono', monospace;font-size: 0.875rem;letter-spacing: -0.01em;font-weight: 400;}
 
        details summary {list-style: none;cursor: pointer;transition: background-color 0.2s ease;}
 
        details summary:hover {background-color: rgba(0, 0, 0, 0.02);}
 
        html.dark details summary:hover {background-color: rgba(255, 255, 255, 0.05);}
 
        details summary::-webkit-details-marker {display: none;}
 
        details summary::before {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            font-size: 0.75rem;
            margin-right: 0.5rem;
            transition: transform 0.2s ease;
            display: inline-block;
            transform: translateY(-1px);
        }
 
        details[open] summary::before { transform: rotate(180deg) translateY(-1px);}
 
        .theme-toggle {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.3s ease;
            z-index: 1000;
        }
 
        .theme-toggle:hover {transform: scale(1.1);}
 
        .nav-link {position: relative;transition: color 0.3s;}
 
        .nav-link.active {color: #000 !important;}
 
        .nav-link.active::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -4px;
            width: 100%;
            height: 2px;
            background: #000;
            border-radius: 2px;
            transition: background 0.3s;
        }
 
        html.dark .nav-link.active {color: #fff !important;}
 
        html.dark .nav-link.active::after {background: #fff;}
 
        .cell-value {display: inline-block;width: 100%;padding-right: 2rem;}
 
        .cell-value:hover+.copy-btn,
        .copy-btn:hover {opacity: 100;}
 
        .copy-btn {
            opacity: 0;
            position: absolute;
            right: 0.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: transparent;
            color: #9CA3AF;
            padding: 0.25rem;
            transition: opacity 0.2s ease;
        }
 
        .copy-btn:hover {color: #333;}
 
        html.dark .copy-btn:hover {color: #fff;}
 
        .copy-msg {
            display: none;
            position: absolute;
            right: 2.5rem;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            padding: 0.25rem 0.5rem;
        }

	summary {
    		font-weight: bold;
    		color: #2a5d84;
    		background-color: #e0f0ff;
    		padding: 8px;
    		border-radius: 4px;
    		cursor: pointer;
    		font-size: 1.1em;
	}

	h1 { color: #365F91; font-size: 1.2em; background-color: #FFFFFF;align-items:flex-start;text-align: center;}
        h2 { color: #365F91; font-size: 1.2em; background-color: #FFFFFF;align-items:flex-start;text-align: start;}
        h3 { color: #365F91; font-size: 1.2em; background-color: #FFFFFF;align-items:flex-start;text-align: match-parent;}

        .menu-links {
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .menu-links a {
            padding: 0.25rem 0.75rem;
            font-size: 0.95em;
            border-radius: 6px;
            margin-bottom: 4px;
            white-space: nowrap;
        }

        @media (max-width: 900px) {
            .menu-links {
                justify-content: flex-start;
            }
            .menu-links a {
                font-size: 0.90em;
                padding: 0.25rem 0.5rem;
            }
        }
 	
    </style>

</head>
 
<body class="bg-gray-100 dark:bg-[#181C20] text-gray-900 dark:text-gray-100 transition-colors duration-300">
    <!-- Theme Toggle -->
    <button class="theme-toggle bg-primary text-white dark:bg-primary-light" id="themeToggle">
        <i class="fas fa-moon dark:hidden"></i>
        <i class="fas fa-sun hidden dark:block"></i>
    </button>
    <!-- Disclaimer Banner -->
    <div id="disclaimer"
        class="bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-800 transition-colors">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex-1 text-sm text-yellow-800 dark:text-yellow-200">
                <p>Este mensaje es autogenerado por el sistema .Por favor, no conteste directamente a este correo.Este correo y los archivos adjuntos tienen caracter confidencial y están destinados exclusivamente para el uso de la persona o entidad destinataria. Puede contener información legalmente privilegiada y no puede ser revelada a nadie. Si Vd. ha recibido por error este correo electrónico, por favor notifíquelo y elimine todas las copias de su sistema    <a 
                        href="mailto:david.bdominguez@externos.correo.gob.es"
                        class="text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-200 transition-colors">david.bdominguez@externos.correo.gob.es</a>
                </p>
	
         </div>
         <button id="dismissDisclaimer"
                class="ml-4 text-yellow-600 dark:text-yellow-400 hover:text-yellow-800 dark:hover:text-yellow-200 transition-colors"
                title="Ocultar aviso">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>


    <!-- Header -->
<header
        class="bg-gradient-to-r from-[#fff] to-[#e6e6e6] dark:from-[#181c20] dark:to-[#000] text-white shadow-lg transition-colors">
                <div class="d-inline-flex bg-surface-variant ma-2 pa-2">
                    <img src="data:image/png;base64,{{logo.content}}" alt="Ministerio" class="ma-2 pa-2" loading="lazy">
                </div>
<div><p><h1>{{ hayupdates }}<br></h1></p></div>
<!--  <div><p>{{ cambiorelease }}</p></div> -->
        <div class="container mx-auto px-4 py-3">
            <div class="flex flex-col md:flex-row items-center justify-between">

                <div class="text-right">
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">Fecha del informe: <span
                            class="font-semibold">
                            {{ ansible_date_time.date }}
                        </span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">Servidor: <span
                            class="font-semibold">{{ ansible_hostname }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Release Actual<span class="font-semibold">	{{ ansible_distribution_version }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Release Siguiente <span class="font-semibold">{{ versionfutura.stdout }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Versión actuál del Kernel <span class="font-semibold">{{ ansible_kernel }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Versión Sugerida por RedHat	<span class="font-semibold">{{ suggested.stdout }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Último Reinicio hace <span class="font-semibold">{{ diasultimoreinicio.stdout_lines }} días</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200">
                            Última Actualización del Kernel <span class="font-semibold">{{ kernelLast.stdout }}</span></p>
	</div>
		<div class="text-right">

                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200"> <span
                        class="font-semibold">{{ subscription.stdout_lines[-0] }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200"><span
                        class="font-semibold">{{ subscription.stdout_lines[-1] }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200"><span
                            class="font-semibold">{{ subscription.stdout_lines[-2] }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200"><span
                            class="font-semibold">{{ subscription.stdout_lines[-3] }}</span></p>
                    <p class="text-xs md:text-sm text-gray-800 dark:text-gray-200"><span
                            class="font-semibold">{{ subscription.stdout_lines[-4] }}
                </div>
        </div>
    </header>
 
    <!-- Navigation -->

    <nav
        class="bg-white/70 dark:bg-[#23272F]/70 backdrop-blur-md backdrop-saturate-150 shadow-md sticky top-0 z-50 transition-colors">
	<div><h1>INFORME PREVIO PARCHEADO DEL SISTEMA OPERATIVO DEL SERVIDOR {{ ansible_hostname }}</h1></div>
        <div class="container mx-auto px-4 flex justify-between items-center py-4">
            <div class="flex menu-links space-x-2">
                <a href="#datos-satellite"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Satellite</a>
                <a href="#paquetes"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Instalados</a>
                <a href="#parches"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Pendientes</a>
                <a href="#Conectividad"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Conectividad</a>
                <a href="#RED"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Red</a>
                <a href="#Facts"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Datos</a>
                <a href="#SERVICIOS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Servicios</a>
                <a href="#FICHEROS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Ficheros</a>
                <a href="#DOMINIO"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Dominio</a>
                <a href="#DISCOS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Discos</a>
                <a href="#USUARIOS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Usuarios</a>
                <a href="#ENRIQUECIDOS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Enriquecidos</a>
                <a href="#RESUMEN"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Resumen</a>
                <a href="#FECHAS"
                    class="nav-link text-primary dark:text-white hover:text-primary-light dark:hover:text-gray-300 font-normal transition-colors">Fechas</a>

            <button id="toggleAllDetails"
                class="ml-4 px-2 py-1 rounded text-xs text-primary dark:text-white font-medium transition-colors bg-primary/10 dark:bg-white/10 hover:bg-primary/20 dark:hover:bg-white/20 focus:outline-none flex items-center gap-1">
                <span id="toggleAllIcon">+ </span>
                <span id="toggleAllText">Expandir todo</span>
            </button>
        </div>
    </nav>
 
    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">


    




<!-- Server Details Section -->
		<section id="detalles-servidor" class="mb-8">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
		 <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Detalles del Servidor</h2>
                <details class="group border border-gray-200 dark:border-[#374151] rounded mb-4 transition-colors">
                <summary>
                        Información del Sistema {{ ansible_hostname }} {{ ansible_date_time.date }}
                </summary>
                <div class="mt-4 overflow-x-auto">
                        <table class="min-w-full rounded">
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100 w-1/2">
                                        Hostname</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                        {{ ansible_hostname }}</td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Release
                                        Actual</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">{{ ansible_distribution_version }}</td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Release
                                        Siguiente</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">{{ versionfutura.stdout }}</td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Versión
                                        actuál del Kernel</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                        {{ ansible_kernel }}</td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Versión
                                        Sugerida por RedHat</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">{{ suggested.stdout }}</td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Último
                                        Reinicio hace </td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">{{ diasultimoreinicio.stdout_lines }} días
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100">Última
                                        Actualización del Kernel</td>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">{{ kernelLast.stdout }}</td>
                                </tr>
                            </tbody>
                        </table>
                </div>
                </details>
            </div>
        </section>


<!-- Satellite Data Section -->
        <section id="datos-satellite" class="mb-8">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Datos Asignados en Satellite</h2>
                <details class="group border border-gray-200 dark:border-[#374151] rounded mb-4 transition-colors">
                    <summary>
                        Datos de Suscripción asignados en Satéllite
                    </summary>
                    <div class="mt-4 overflow-x-auto transition-colors">
                        <table class="min-w-full rounded transition-colors">
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td
                                        class="px-6 py-4 text-sm font-medium text-gray-900 dark:text-gray-100 w-1/2 transition-colors">
                                        {{ subscription.stdout_lines |join('<br>')}}</td>
                                    <td
                                        class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 transition-colors group relative">
                                        <span class="cell-value"></span>
                                        <button
                                            class="copy-btn opacity-0 group-hover:opacity-100 focus:opacity-100 absolute right-2 top-1/2 -translate-y-1/2 bg-transparent text-gray-400 hover:text-primary dark:hover:text-white p-1 transition"
                                            data-value="{{ subscription.stdout_lines |join('<br>')}}" title="Copiar">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                        <span
                                            class="copy-msg hidden absolute right-10 top-1/2 -translate-y-1/2 bg-black/80 text-white text-xs rounded px-2 py-1">¡Copiado!</span>
                                    </td>
                                </tr>
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                        {{ subscription.stdout_lines |join('<br>')}}</td>
                                </tr>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                         {{ subscription.stdout_lines[-1] }}</td>
                                </tr>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                         {{ subscription.stdout_lines[-2] }}</td>
                                </tr>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                         {{ subscription.stdout_lines[-3] }}</td>
                                </tr>
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                         {{ subscription.stdout_lines[-4] }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </details>
<!-- end Satellite Data Section -->

<!-- excluded section -->
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>
                        Paquetes Excluidos de Actualización
                    </summary>
                    <div class="mt-4 px-6 py-4 transition-colors">
                        <p class="mono text-lg text-red-600 dark:text-red-400 font-bold transition-colors"> 
                          
{% if exclu.stdout | trim %}
<pre>{{ exclu.stdout | replace('\n','<br>') }}</pre>
{% else %}
<div style="color:red; font-weight:bold;">
       REVISAR_⚠️ ⚠️NO HAY EXCEPCIONES DE ACTUALIZACIONES DECLARADAS EN {{ ansible_hostname }}_REVISAR
</div>
{% endif %}

  </p></details>
<!-- end excluded section -->

<!-- satellite release section -->

                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>
                        Asignado en Satellite al Release
                    </summary>
                    <div class="mt-4 px-6 py-4 transition-colors">
                        <p class="mono text-gray-700 dark:text-gray-400 transition-colors">{{ subscriptionrelease.stdout_lines }}</p></details>
                    
<!-- end satellite release section -->
<!-- repo list  section -->

                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>
                        Repositorios Disponibles para {{ subscriptionrelease.stdout }}
                    </summary>
                    <div class="mt-4 overflow-x-auto transition-colors">
                        <table class="w-full rounded border border-gray-200 dark:border-[#374151] transition-colors">
                            <thead>

                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-100 break-all mono">
                                        {{ repos.stdout_lines|join('<br>') }}</td>
                        </tr>
                        </tbody>
                        </table></details>
                    </div>
        </section>


<!-- end repo list  section -->



<!-- Packages install Section -->
    <section id="paquetes Instalados" class="mb-8">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Instalados</h2>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>
                        Últimos Paquetes Instalados
                    	</summary>

                    	<div class="mt-4 overflow-x-auto transition-colors">
                            <table class="w-full rounded border border-gray-200 dark:border-[#374151] transition-colors">
                                <thead>
                            </thead>
                    <tbody>
				{% for linea in ulti.stdout_lines %}
    				<tr>
        			<td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-100 mono transition-colors">
				{{ linea }}</td>
    				</tr>
			        {% endfor %}                    
                </tbody>
	</table>	
		</details>
		</div>


<!--end  Packages install Section  -->
<!-- Histórico yum Section  -->
	<section id="historico" class="mb-8">
	<div class="mt-4 overflow-x-auto transition-colors">
                <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Histórico de Instalaciones YUM</h2>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>
                        Histórico de Instalaciones YUM
                    </summary>
                    <div class="mt-4 overflow-x-auto transition-colors">
                        <table class="min-w-full rounded transition-colors">
                            <thead>
					</thead>
                            
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-100 mono transition-colors">
			<br><p>{{ histo.stdout }}</p> 
			</td></tr>
                            </tbody> 
                        </table></details>
                    </div>
<!-- end Histórico yum Section  -->
<!--  Section -->
<section id="paqueteria" class="mb-8">
<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
		<h3 id="Paquetes sin reclamo"></h3>
			<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
			    <summary>
                   Paquetería sin reclamo
                </summary>
                <div class="mt-4 overflow-x-auto transition-colors">
                    <table class="min-w-full rounded transition-colors">
                    <thead>
			</thead>
                            <tbody> 
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-100 mono transition-colors">
                                {% for linea in  reclamo.stdout_lines  %}
                                         <tr><td>{{ linea }}</td></tr>
                                     {% endfor %}  

                       	    </td></tr>
		        	</tbody> 
		</table>
            </details>
        </div>
<!--  Section -->
<section id="paqueteria" class="mb-8">
<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
            <h3 id="Parches Instalados"></h3>
            <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>Parches Instalados</summary>
                    <div class="mt-4 overflow-x-auto transition-colors">
                        <table class="min-w-full rounded transition-colors">
                            <thead>
                                <tr>
					<th scope="col" class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider border-b border-gray-200 dark:border-[#374151] transition-colors">
                                        Parche</th>
                                    
                                    	<th scope="col"  class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider border-b border-gray-200 dark:border-[#374151] transition-colors">
                                        Tipo</th>
                                    
                                      	<th scope="col" class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider border-b border-gray-200 dark:border-[#374151] transition-colors">
                                        Paquete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b border-gray-200 dark:border-gray-700 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-300 mono">
                                        {% for linea in  rpminstalados.stdout_lines  %}
                                                <tr><td>{{ linea }}</td></tr>
                                        {% endfor %}
                                    </tr></td>
                            </tbody>   
                        </table></details>
                    </div>
		</div>
    </section>
<!-- Fin Patches installed Section -->




<!-- Patches pendin Section -->
        <section id="parches" class="mb-8">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
            <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Pendientes</h2>
            <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
		<summary>
                        Parches Disponibles
            </summary>
<!--		<p>{{ rpmsegactualizables.stdout_lines|join(',') }}</p>
-->
<br>
 	<tbody>
           <table class="min-w-full rounded transition-colors"> 
                {% for linea in  rpmsegactualizables.stdout_lines %}
			<tr><td>{{ linea }}</td></tr>
		    {% endfor %}
                
	</tbody>  
	   </table> 
		</details>
           </div> 
<!--  Section  -->
	<section id="paqueteria" class="mb-8">
	<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
<!--            <h2 class="mono text-lg font-bold text-primary dark:text-blue-200 transition-colors"></h2>  -->
		<h3 id="PAQUETES DISPONIBLES"></h3>
		<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">

		<summary>
                Paquetes disponibles para la versión {{ subscriptionrelease.stdout }}
            </summary>
		<tbody>
		<table class="min-w-full rounded transition-colors">
               <tr>
                <td>{% for linea in Lis.stdout_lines %}
                          <tr><td>{{ linea }}</tr></td>
                {% endfor %}
                                </td></tr></table>
	</tbody>
</details>
			   
                        </div>
    </section>
 



<!-- Connect Section -->
	<div class="mt-4 overflow-x-auto transition-colors">
	<section id="Conectividad" class="mb-8">
             <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Conectividad</h2>
<!--  Section  -->

                <h3 id="Conectividad con RHC"></h3>
		<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
		<summary>Conectividad con RHC PARA {{ ansible_hostname }}</summary>
                         <p>{{ rhcstatus.stdout_lines |join('<br>') }} </p></details>
		</div>
<!--  Section  -->
	<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
	<section id="Conectividad" class="mb-8">
		<h3 id="INSIGHTS-CLIENT RH"></h3>
        	<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
		<summary>Cliente Red Hat Insights INSIGHTS-CLIENTS  para {{ ansible_hostname }}</summary>
	<p><b>Estado:</b><br>{{ insights_status | replace('\n','<br>') }}</p>
	<p><b>Versión:</b> {{ insights_version }}</p>
 	{% if 'NOT registered' in insights_status %}
	<p style=color:red;>REVISAR_⚠️ ⚠️Estado de insights-client Not registered para {{ ansible_hostname }}</p>
  	{% endif %}
		</details>
		</div>
<!--  Section  -->
<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
<!--        <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors"> -->
                <h3 id="Conectividad con AAP"></h3>
        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                        <h2 id="CONECTIVIDAD CON AAP"></h2>
                        <summary>
                            Conectividad con AAP</summary>
			<p>{{ conectaap.stdout}}</p></details>
		</div>
<!--  Section  -->
<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
<!--        <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors"> -->
                <h3 id="Conectividad con COMMVAULT-NG"></h3>
        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                        <h2 id="CONECTIVIDAD CON COMMVAULT-NG"></h2>
                        <summary>
                            Conectividad con COMMVAULT-NG</summary>
                        <p>{{ conectcommvault.stdout}}</p></details>
                </div>
<!--  Section  -->
        <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
<!--        <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors"> -->
		<h3 id="SINCRONIZACIÓN HORARIA"></h3>
        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                        <h2 id="SINCRONIZACIÓN HORARIA"></h2>
			<summary>
                            Sincronización Horaria</summary>
                        <h3 id="NTPD"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>NTPD</summary>
                                <p>{{ sincrontpd.stdout }}{{ synchronized.stdout_lines }}</details></p>
                        <h3 id="CHRONIE"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>CHRONIE</summary>
                                <p>{{ sincrochronie.stdout }}{{ synchronized.stdout_lines }}</details></p>
                        <h3 id="SINCRONIZADO"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>SINCRONIZADO</summary>
                                <p>{{ synchronized.stdout_lines }}</details></p>
                        </details>
                        </div>
 	</section> 

<!-- FIN Connect Section -->

 



<!-- Facts Details Section -->	
	<section id="Facts" class="mb-8">
        <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
        <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Datos descubiertos</h2>
		<h2 id="Facts"></h2><br><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
            <summary>Ansible Facts de {{ ansible_hostname }}</summary>
                        <br><h3>facts</h3>
			<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
			<summary>Detalles Generales</summary>
        			<table class="min-w-full rounded" border='1'>
            			<tr>
                		<th>Arquitectura</th>
                		<td>{{ ansible_architecture }}</td>
            			</tr><tr>
                		<th>Kernel</th>
                		<td>{{ ansible_kernel }}</td></tr>
            			<tr><th>SELinux</th><td>{{ ansible_selinux.status }}</td></tr>
            			<tr><th>Virtualización</th><td>{{ ansible_virtualization_role }} ({{ ansible_virtualization_type }})</td></tr>
            			<tr><th>Distribución</th><td>{{ ansible_distribution }} {{ ansible_distribution_version }} ({{ ansible_distribution_release }})</td></tr>
            			<tr><th>Producto</th><td>{{ ansible_product_name }}</td></tr>
        			</table>
    			</details>
<!--  Section  -->

    			
    			<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Interfaces de Red</summary>
        		<ul>
            			{% for interface in ansible_interfaces %}
            				<li>{{ interface }}</li>
            			{% endfor %}
        		</ul></details>
    			
<!-- end  Section  -->
<!--  ipv4addresses Section  -->


                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Dirección IPv4 Predeterminada</summary>
        		<table class="min-w-full rounded">
                                <tr><th>Gateway</th><td>{% if ansible_default_ipv4.gateway is defined %}{{ ansible_default_ipv4.gateway }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Interfaz</th><td>{% if ansible_default_ipv4.interface is defined %}{{ ansible_default_ipv4.interface }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Dirección</th><td>{% if ansible_default_ipv4.address is defined %}{{ ansible_default_ipv4.address }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Broadcast</th><td>{% if ansible_default_ipv4.broadcast is defined %}{{ ansible_default_ipv4.broadcast }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Netmask</th><td>{% if ansible_default_ipv4.netmask is defined %}{{ ansible_default_ipv4.netmask }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Network</th><td>{% if ansible_default_ipv4.network is defined %}{{ ansible_default_ipv4.network }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Prefix</th><td>{% if ansible_default_ipv4.prefix is defined %}{{ ansible_default_ipv4.prefix }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>MAC Address</th><td>{% if ansible_default_ipv4.macaddress is defined %}{{ ansible_default_ipv4.macaddress }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>MTU</th><td>{% if ansible_default_ipv4.mtu is defined %}{{ ansible_default_ipv4.mtu }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Type</th><td>{% if ansible_default_ipv4.type is defined %}{{ ansible_default_ipv4.type }}{% else %}No definido{% endif %}</td></tr>
                                <tr><th>Alias</th><td>{% if ansible_default_ipv4.alias is defined %}{{ ansible_default_ipv4.alias }}{% else %}No definido{% endif %}</td></tr>
                        </table></details>


                        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Direcciones IPv4</summary>
            			{% for ip in ansible_all_ipv4_addresses %}
            				{{ ip }}
            			{% endfor %}
                		</details>

<!--  end ipv4addresses Section  -->




<!--  Gestor Servicios Section  -->

                        <div class="mt-4 overflow-x-auto transition-colors">
			<h3 id="Gestor de Servicios"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Gestor de Servicios</summary>
				<p>{{ ansible_service_mgr }}</p></details>
			</div>
<!--  end Gestor Servicios Section  -->

<!-- facts  Section  -->

            <div class="mt-4 overflow-x-auto transition-colors">
			<h3 id="Detalles de maquina"></h3>
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                        <p><details><summary>Detalles del servidor</summary></p> 
                                <br><p>bios :<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"></p>
                                        <pre>{{ bios.stdout_lines|join('<br>') }}</pre></p></details>
                                <p>system :<details>
                                        <pre>{{ system.stdout_lines |join('<br>')}}</pre></p></details>
                                <p>baseboard:<details>
                                        <pre>{{ baseboard.stdout_lines |join('<br>')}}</pre></p></details>
                                <p>chassis:<details>
                                        <pre>{{ chassis.stdout_lines |join('<br>')}}</pre></p></details>
                                <p>processor :<details>
                                        <pre>{{ processor.stdout_lines |join('<br>')}} días</pre></p></details>
                                <p>memory :<details>
                                        <pre>{{ memory.stdout_lines |join('<br>')}}</pre></p></details>
				<p>cache:<details>
		                        <pre>{{ cache.stdout_lines |join('<br>')}}</pre></p></details>
				<p>connector:<details>
		                        <pre>{{ connector.stdout_lines |join('<br>')}}</pre></p></details>
				<p>slot:<details>
		                        <pre>{{ slot.stdout_lines |join('<br>') }}</pre></p></details>
								</details>
			</div>
			</div>
		</section>
<!-- fin facts  Section -->







<!-- RED Section -->
	<div class="mt-4 overflow-x-auto transition-colors">
        <section id="RED">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
		<h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Red</h2>
                <h3 id="IPROUTE"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>IPROUTE</summary>
				<p>{{ iproute.stdout_lines|join('<br>')  }}</p>
				<p>error:<br>{{  iproute.stderr }}<br></details></p>
                        <h3 id="route"></h3><details><summary>ROUTE</summary>
				<p>{{ route.stdout_lines |join('<br>') }}</details></p>
                        <h3 id="ALL"></h3><details><summary>ALL</summary>
				<p>{{ iprouteall.stdout_lines |join('<br>') }}</details></p>
                        <h3 id="CLI"></h3><details><summary>CLI</summary>
				<p>{{ nmcli.stdout_lines |join('<br>') }}</details></p>
			<h3 id="IPTABLES"></h3><details><summary>IPTABLES</summary>
				<p>
				{% if iptableslist.stdout | trim %}
					<pre>{{ iptableslist.stdout | replace('\n','<br>') }}</pre>
				{% else %}
					<div style="color:red; font-weight:bold;">
       						REVISAR_⚠️ ⚠️No se pudieron obtener las reglas iptables en {{ ansible_hostname }}_REVISAR
					</div>
				{% endif %}
				{# Detectar errores explícitos en iptables (stderr) #}
				{% if iptableslist.stderr and iptableslist.stderr | trim %}
					<div style="color:red; font-weight:bold;">
       					REVISAR_⚠️ ⚠️ Error en ejecución de iptables: {{ iptableslist.stderr | replace('\n',' ') }} _REVISAR
					</div>
				{% endif %}
				</p></details>
			</div>
			</section>
<!-- FIN RED Section -->





<!-- SERVICIOS Y PROCESOS -->
	<div class="mt-4 overflow-x-auto transition-colors">
        <section id="SERVICIOS">
            <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
		<h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Servicios y Procesos</h2>
                <h3 id="SERVICIOS ACTIVOS"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>SERVICIOS ACTIVOS</summary>
				<table class="min-w-full rounded" border='1'>
<!--				{{ serviciosrunning.stdout_lines }}</table></details> -->
{% if serviciosrunning.stdout | trim %}
<table border="1">
<tr>
<th>Servicio</th>
<th>Carga</th>
<th>Estado</th>
<th>Descripción</th>
</tr>

        {% for linea in serviciosrunning.stdout.split('\n') if linea | trim %}

            {% set cols = linea.split() %}
<tr>
<td>{{ cols[0] }}</td>
<td>{{ cols[1] }}</td>
<td>{{ cols[2] }}</td>
<td>{{ cols[3:] | join(' ') }}</td>
</tr>

        {% endfor %}
</table>

{% else %}
<div style="color:red; font-weight:bold;">

        REVISAR_⚠️ ⚠️ No se pudo obtener el listado de servicios running en {{ ansible_hostname }}_REVISAR
</div>

{% endif %}
</table></details> 
<!--  Section  -->

                <h3 id="PROCESOS DE {{ aplicacion.stdout }}"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>PROCESOS DE {{aplicacion.stdout}}</summary>
				<table class="min-w-full rounded" border='1'>
					<pre>{{ procesosapp.stdout }}</pre>
					</table></details>
<!--  Section  -->
                <h3 id="COMUNICACION DE {{ aplicacion.stdout }}"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>COMUNICACIÓN DE {{aplicacion.stdout}}</summary>
                                <table class="min-w-full rounded" border='1'>
                                        <pre>{{ commapp.stdout }}</pre>
                                        </table></details>
<!--  Section  -->

                <h3 id="REVISION LOG DE {{ aplicacion.stdout }}"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>REVISION LOG DE {{ aplicacion.stdout }}</summary>
                                <table class="min-w-full rounded" border='1'>
                                        <pre>{{ erroraplicacion.stdout }}</pre>
                                        </table></details>
<!--  Section  -->
<!--  Section  -->
               <h3 id="SERVICIO DE {{ aplicacion.stdout }}"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>SERVICIOS DE {{aplicacion.stdout}}</summary>
                                <table class="min-w-full rounded" border='1'>
                                        <p>{{ systemctlapp.stdout_lines|join('<br>') }}</p>
                                        </table></details>
<!--  Section  -->

                    <h3 id="SERVICIOS FALLIDOS"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>SERVICIOS FALLIDOS</summary>
				<table class="min-w-full rounded" border='1'>
<h3>Servicios fallidos</h3>

{% set salida = serviciosFallidos.stdout | trim %}

{% if salida and salida != '0 loaded units listed.' %}
<div style="color:red; font-weight:bold;">REVISAR_⚠️ ⚠️Se detectaron servicios fallidos en {{ ansible_hostname }}{{ serviciosFallidos.stdout }}_REVISAR</div>
<table border="1">
<tr>
<th>Servicio</th>
<th>Carga</th>
<th>Estado</th>
<th>Descripción</th>
</tr>

        {% for linea in salida.split('\n') if linea | trim %}

            {% set cols = linea.split() %}
<tr>
<td>{{ cols[0] }}</td>
<td>{{ cols[1] }}</td>
<td>{{ cols[2] }}</td>
<td>{{ cols[3:] | join(' ') }}</td>
</tr>

        {% endfor %}
</table>

{% else %}
<p>No hay servicios fallidos.</p>

{% endif %}

{% if serviciosFallidos.stderr | trim %}
<div style="color:red; font-weight:bold;">

        REVISAR_⚠️ ⚠️Error ejecutando systemctl: {{ serviciosFallidos.stderr | replace('\n',' ') }} _REVISAR
</div>

{% endif %}
 

</table></details>
			</div>
		</section>


<!-- FIN SERVICIOS Y PROCESOS -->





<!-- FICHEROS DE CONFIGURACION -->

	<div class="mt-4 overflow-x-auto transition-colors">
        <section id="FICHEROS">
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
			 <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Ficheros de configuración</h2>
<!--  Section  -->

                <h3 id="Certificados PKI x509"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Certificados PKI x509</summary>
                                <p>{{ pkix509.stdout_lines |join('<br>')}}</p>
                                <p style=color:red;><table class="min-w-full rounded" border='1'> ⚠️CARACTERES{{ pkix509.stderr }}</p></table></details>
<!--  Section -->

                <h3 id="Certificados PKI CRT x509"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Certificados PKI CRT x509</summary>
                                <p>{{ pkiCRTx509.stdout_lines |join('<br>')}}</p>
                                <p style=color:red;><table class="min-w-full rounded" border='1'> ⚠️CARACTERES{{ pkiCRTx509.stderr }}</p></table></details>
<!--  Section -->

                <h3 id="FICHEROS DE HOSTS"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>FICHERO HOSTS</summary>
				<p><table class="min-w-full rounded" border='1'>{{ etchosts.stdout_lines |join('<br>')}}</table></p>
				<p style=color:red;><table class="min-w-full rounded" border='1'> ⚠️CARACTERES{{ etchostserror.stdout}}</p></table></details>
<!--  Section  -->

                <h3 id="FICHEROS FSTAB"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>FICHERO FSTAB</summary>
				<p>{{ etcfstab.stdout_lines |join('<br>')}}</p>
				<p style=color:red;><table class="min-w-full rounded" border='1'> ⚠️CARACTERES{{ etcfstaberror.stdout }}</p></table></details>
<!--  Section -->

                <h3 id="FICHERO CONFIG"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>FICHERO CONFIG {{aplicacion.stdout}}</summary>

 <br><pre>{{ etcconfigini.stdout_lines|join('<br>') }}</pre><p> 

                      	</p></details>

<!--  Section --> 

           <h3 id="ficheros de rutas"></h3>
            <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                <summary>FICHEROS DE RED</summary>
				<br><p>
				{{ routefich.stdout_lines|join('<br>') }}
				</p></details>
				
<!--  Section -->

                <h3 id="ficheros de rutas "></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>FICHEROS DE RUTAS</summary>
                                <pre><br>{{ fichbond.stdout_lines|join('<br>') }}</pre><p><br>
                                {{ ficherosrutas.stdout_lines|join('<br>') }}</p><br>
				<pre>ifcfg:<br>{{ ficherosifcfg.stdout_lines|join('<br>') }}</pre>
</details>
</div>
</section>
<!--  Section 
                                
			<p><br>MASTER y ESCLAVO :<br></p>
			 
			{% if masterslave.stdout_lines %}
           			<br><p style="color:green;">[OK] Interfaces esclavas encontradas:<br> {{ masterslave.stdout_lines | join(' ') }}</p>
         		{% else %}
           			<br><p style="color:red;">REVISAR_⚠️ ⚠️ [ERROR] No se encontraron interfaces esclavas configuradas para bond._REVISAR</p>
         		{% endif %}
		        <br>	
			{% if ficherosVlanbond.stdout != "correcto no hay ficheros Vlan" %}
			<p  style="color:red;"><br>REVISAR_⚠️ ⚠️{{ ficherosVlanbond.stdout }}_REVISAR<br></p>
			{% else %}
			<p style="color:green;"><br>[OK] No existen ficheros llamados Vlan.<br></p>
			{% endif %}
			</details>
			</div>
			</section>
-->

<!-- RED Section -->


<!-- DOMINIO Section -->
	<div class="mt-4 overflow-x-auto transition-colors">
		<section id="DOMINIO">
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
			 <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Dominio</h2>
			<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>DATOS DE DOMINIO</summary>
				<p>{{ realmlist.stdout_lines |join('<br>')}}</details></p>
			</div>
<!--			</section> -->

<!-- DOMINIO Section -->



<!--         <div class="mt-4 overflow-x-auto transition-colors">   -->

                <section id="DOMINIO">
                        <div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
		<summary>
			FICHERO CONFIGURACIÓN DE DOMINIO SSSD</summary>
                                <p>{{ fichsssd.stdout_lines |join('<br>')}}</details></p>
                        </div>
                        </section>
<!-- Section -->



<!-- DISC Section -->
    <div class="mt-4 overflow-x-auto transition-colors">		
	    <section id="DISCOS">
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
			 <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Discos</h2>
                <h3 id="IDENTIFICACIÓN DISCOS"></h3>
                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>IDENTIFICACIÓN DISCOS</summary>
				    <p>{{ blkidstatus.stdout_lines |join('<br>')}}</p></details>
<!--  Section  -->

                    <h3 id="OCUPACIÓN DE DISCOS"></h3>
        <!--                <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                            <summary>OCUPACIÓN DF</summary>
				<table class="min-w-full rounded" border='1'>
					{{ uso_disco.stdout_lines }}
					</table></details> -->
<h2>Estado del almacenamiento (df -h)</h2>
<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
<table class="min-w-full rounded" border='1'>
<thead>
<tr>
<th>Filesystem</th>
<th>Target</th>
<th>Available</th>
<th>Use%</th>
</tr>
</thead>
<tbody>
 {% for line in uso_disco.stdout_lines %}
   {# Omitir cabecera y tmpfs/devtmpfs #}
   {% if not line.startswith('Filesystem')
         and 'tmpfs' not in line
         and 'devtmpfs' not in line %}
     {% set cols = line.split() %}
     {% set pct_raw = cols[4]  %}
     {% set pct = pct_raw.rstrip('%') |int %}
<tr>
<td>{{ cols[0] }}</td>          {# Filesystem   #}
<td>{{ cols[5] }}</td>          {# Mounted on (Target) #}
<td>{{ cols[3] }}</td>          {# Avail        #}
<td>{{ cols[4] }}</td>          {# Use%         #}
#}

        {# Si supera 60% → colorear #}

        {% if pct >= 80 %}
<td style="color:red; font-weight:bold;">{{ pct_raw }}</td>
<td style="color:red; font-weight:bold;">

            REVISAR_⚠ Aviso: Uso elevado en disco _REVISAR
</td>

        {% else %}
<td>{{ pct_raw }}</td>
<td>OK</td>

        {% endif %}#}

        {# Si supera 60% → colorear #}

        {% if pct >= 60 %}
<td style="color:red; font-weight:bold;">{{ pct_raw }}</td>
<td style="color:red; font-weight:bold;">

            ⚠ Aviso REVISAR_: Uso elevado_REVISAR
</td>

        {% else %}
<td>{{ pct_raw }}</td>
<td>OK</td>

        {% endif %}
 
</tr>
   {% endif %}
 {% endfor %}
</tbody>
</table>
</details>
<!--  Section  -->

                    <h3 id="OCUPACIÓN DE FS"></h3>
                    <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                        <summary>OCUPACIÓN FS</summary>
				    <p>{{ opt_info }}</p><br><p>{{ tmp_info }}</p><br><p>{{ home_info }}</p><br><p>{{ varlog_info }}</p></details>
<!--  Section  -->

                    <h3 id="MONTAJE"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                    <summary>MONTAJE</summary>
				        <table class="min-w-full rounded" border='1'>
					{{ fsmount.stdout_lines|join('<br>') }}</table></details>
<!--  Section  -->

                    <h3 id="USO OPT DE APLICACIÓN {{ aplicacion.stdout }}"></h3>
                    <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors">
                        <summary>USO OPT APLICACIÓN {{ aplicacion.stdout }}</summary>
            <p>{{ optusers.stdout_lines |join('<br>') }}</p></details>
			</div>
	</section>
<!-- FIN DISC Section -->




<!-- USUARIOS Section -->
    <div class="mt-4 overflow-x-auto transition-colors">
        <section id="USUARIOS">
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
			 <h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Usuarios</h2>
                <h3 id="USO OPT  DE APLICACIÓN {{ aplicacion.stdout }}"></h3>
                    <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>USO APLICACIÓN {{ aplicacion.stdout }}</summary>
				<p>{{ optusers.stdout_lines |join('<br>') }}</p></details>
<!--  Section  -->

                <h3 id="USUARIOS DE SISTEMA EN {{ ansible_hostname }}"></h3>
				<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>USUARIOS DE SISTEMA EN {{ ansible_hostname }}</summary>
				<p> {{ homeusers.stdout_lines|join('<br>')}}</p></details>
<!--  Section  -->

                <h3 id="USUARIOS SUDO"></h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>USUARIOS SUDO</summary>
				<p>{{ sudoers.stdout_lines |join('<br>')}}</p></details>
                        <h3 id="ERRORES SUDO"></h3>
                        <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>ERRORES SUDO</summary>
				<p style=color:red;>REVISAR_⚠️ ⚠️{{ sudoers.stderr }}⚠️ ⚠️_REVISAR</p></details>
			</div>
                        </section>
<!-- FIN USUARIOS Section -->



<!-- DATOS ENRIQUECIDOS Section -->
    <div class="mt-4 overflow-x-auto transition-colors"></div>
        <section id="ENRIQUECIDOS">
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
			<h2 class="text-xl font-medium text-primary dark:text-white mb-6 transition-colors">Datos enriquecidos</h2>
                        <h3 id="Contactos"> </h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Contactos</summary>
				<table class="min-w-full rounded" border='1'><tr><th></th></tr><tr>
                                        {% for contacto in  contacto.stdout|split(';')  %}
                                                <tr>
                                                <td>{{ contacto }}</td>
                                                </tr>
                                        {% endfor %}
                                </tr></table></details>
<!--  Section  -->

                                <h3 id="Aplicación"> </h3><details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Aplicación</summary>
				<p>{{ aplicacion.stdout }}</p></details>
<!--  Section  -->

                <h2 id="Fechas de Parcheado"></h2>
				<details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Fechas de Parcheado</summary>
				<p>Ciclo de parcheado  {{ fechas_parcheado.stdout_lines }}</p><br>
				<p>{{ fechaparcheado.stdout }}</p></details>
     			 </div>
    </section>
<!-- FIN DATOS ENRIQUECIDOS Section -->



<!-- RESUMEN DE ADVERTENCIAS Section -->
    <div class="mt-4 overflow-x-auto transition-colors">
        <section id="RESUMEN"> 
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">

                         <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>RESUMEN DE ADVERTENCIAS</summary>
				<hr><p><pre>{{ resumen.stdout_lines|join('<br>') }}</pre></p></details><hr>
			</div>
	    </section>
<!-- FIN RESUMEN DE ADVERTENCIAS Section -->




<!-- FECHAS DE PARCHEADO Section -->
    <div class="mt-4 overflow-x-auto transition-colors">
	    <section id="FECHAS"> 
			<div class="bg-white dark:bg-[#23272F] rounded shadow-lg p-8 border border-gray-200 dark:border-[#374151]">
                         <details class="group border border-gray-200 dark:border-gray-700 rounded mb-4 transition-colors"><summary>Fechas de parcheado</summary>
			 <h3>Fecha inicial de ciclo de parcheado</h3>
                         	<p>{{ fechas_parcheado.stdout_lines[0:1] }}</p>
			 <h3>Segunda fecha de parcheado</h3>
                         	<p>{{ fechas_parcheado.stdout_lines[1:2] }}</p>
                         <h3>Tercera fecha de parcheado</h3>
                         	<p>{{ fechas_parcheado.stdout_lines[2:3] }}</p>
                         <h3>Cuarta fecha de parcheado</h3>
                         	<p>{{ fechas_parcheado.stdout_lines[3:4] }}</p><br>
                         	</p><br></details><br><hr>
                         <hr><b><br>
			</div>
			</section>
<!-- FIN FECHAS DE PARCHEADO Section -->


			 <h1 id="FIN">{{ ansible_date_time.date }}<br>Fin del informe {{ ansible_distribution_version }}</b></h1><br><hr> 
			 </div>
<!--			 <div><h3>REVISIONES</h3>
				<p></p><br>
				</div>   -->
            </tbody>
        </table>
    </details>
    <br>
    <br>
 
 
    <!-- Footer -->
    <footer class="bg-white dark:bg-black shadow-md mt-8">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row items-center justify-between gap-2">
            <p class="text-gray-600 dark:text-gray-400">© 2025 FIN DEL INFORME PREVIO PARCHEADO DEL SISTEMA OPERATIVO DEL SERVIDOR {{ ansible_hostname }}</p>
            <a href="#" id="restoreDisclaimer"
                class="text-primary dark:text-blue-300 underline text-sm hover:text-blue-700 dark:hover:text-white transition-colors">Restaurar
                advertencias</a>
<div><h3>REVISIONES </h3>
                    </div>
    </footer>
 
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('themeToggle');
        const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark' || (!currentTheme && prefersDarkScheme.matches)) {
            document.documentElement.classList.add('dark');
        }
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        });
 
        // Disclaimer dismiss functionality
        const disclaimer = document.getElementById('disclaimer');
        const dismissButton = document.getElementById('dismissDisclaimer');
 
        // Check if disclaimer was previously dismissed
        if (localStorage.getItem('disclaimerDismissed') === 'true') {
            disclaimer.style.display = 'none';
        }
 
        dismissButton.addEventListener('click', () => {
            disclaimer.style.display = 'none';
            localStorage.setItem('disclaimerDismissed', 'true');
        });
 
        // Scroll spy funcional
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.nav-link');
 
            // Smooth scroll para los enlaces del menú
            navLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    if (targetSection) {
                        const headerOffset = 70;
                        const elementPosition = targetSection.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                    }
                });
            });
 
            function updateActiveLink() {
                let currentSection = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (window.pageYOffset >= sectionTop - 80) {
                        currentSection = section.getAttribute('id');
                    }
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').slice(1) === currentSection) {
                        link.classList.add('active');
                    }
                });
            }
            window.addEventListener('scroll', updateActiveLink);
            updateActiveLink();
        });
 
        // Expandir / Contraer todo
        const toggleAllBtn = document.getElementById('toggleAllDetails');
        const toggleAllIcon = document.getElementById('toggleAllIcon');
        const toggleAllText = document.getElementById('toggleAllText');
        let allExpanded = false;
        toggleAllBtn.addEventListener('click', () => {
            const allDetails = document.querySelectorAll('main details');
            allExpanded = !allExpanded;
            allDetails.forEach(d => d.open = allExpanded);
            toggleAllText.textContent = allExpanded ? 'Contraer todo' : 'Expandir todo';
            toggleAllIcon.textContent = allExpanded ? '－' : '＋';
        });
 
        // Botón copiar en todas las celdas
        function addCopyButtonsToAllCells() {
            document.querySelectorAll('td').forEach(td => {
                // Evitar duplicar el botón si ya existe
                if (td.querySelector('.copy-btn')) return;
                const value = td.textContent.trim();
                if (!value) return;
                td.classList.add('relative');
                const span = document.createElement('span');
                span.className = 'cell-value group';
                span.textContent = value;
                td.textContent = '';
                td.appendChild(span);
                const btn = document.createElement('button');
                btn.className = 'copy-btn';
                btn.setAttribute('data-value', value);
                btn.setAttribute('title', 'Copiar');
                btn.innerHTML = '<i class="fas fa-copy"></i>';
                td.appendChild(btn);
                const msg = document.createElement('span');
                msg.className = 'copy-msg';
                msg.textContent = '¡Copiado!';
                td.appendChild(msg);
            });
            document.querySelectorAll('.copy-btn').forEach(btn => {
                btn.addEventListener('click', function (e) {
                    e.stopPropagation();
                    const value = this.getAttribute('data-value');
                    navigator.clipboard.writeText(value);
                    const msg = this.parentElement.querySelector('.copy-msg');
                    msg.style.display = 'block';
                    setTimeout(() => msg.style.display = 'none', 1200);
                });
            });
        }
        addCopyButtonsToAllCells();
 
        // Restaurar advertencias
        const restoreDisclaimer = document.getElementById('restoreDisclaimer');
        if (restoreDisclaimer) {
            restoreDisclaimer.addEventListener('click', function (e) {
                e.preventDefault();
                localStorage.removeItem('disclaimerDismissed');
                const disclaimer = document.getElementById('disclaimer');
                if (disclaimer) disclaimer.style.display = '';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    </script>

</main> 
</body>
</html>
